# Code generated by dhall-to-yaml.  DO NOT EDIT.
jobs:
  document:
    name: Generate and Upload Sites
    "runs-on": "ubuntu-20.04"
    steps:
    - name: download artifacts
      uses: "actions/github-script@v5"
      with:
        script: |
          let allArtifacts = await github.rest.actions.listWorkflowRunArtifacts({
            owner: context.repo.owner,
            repo: context.repo.repo,
            run_id: context.payload.workflow_run.id,
          });
          let matchArtifact = allArtifacts.data.artifacts.filter((artifact) => {
            return artifact.name == "pages-artifacts-8.10.7"
          })[0];
          let download = await github.rest.actions.downloadArtifact({
            owner: context.repo.owner,
            repo: context.repo.repo,
            artifact_id: matchArtifact.id,
            archive_format: 'zip',
          });
          let fs = require('fs');
          fs.writeFileSync(`${process.env.GITHUB_WORKSPACE}/pages.zip`, Buffer.from(download.data));
    - name: Extract artifacts
      run: "unzip pages.zip -d ./_site"
    - name: Deploy GitHub Pages
      uses: "peaceiris/actions-gh-pages@v3"
      with:
        github_token: "${{ secrets.GITHUB_TOKEN }}"
        publish_dir: ./_site
name: Update Documentation
'on':
  workflow_run:
    branches:
    - master
    types:
    - completed
    workflows:
    - Build
